@model List<PhotoSocialNetwork.ViewModels.PostViewModel>

<div id="postsContainer">
    @if (Model.Count == 0)
    {
        <label>No posts were found</label>
    }
    @foreach (var profile in Model)
    {
        <div class="row review profileInfo" style="width: 80%; margin: 0 auto; margin-bottom: 10px">
            <div class="leftProfile">
                <img id="posterImage" src="@profile.PhotoPath" style='width: 200px; height: 200px; object-fit: contain; display: block; margin: 0 auto;'>
            </div>
            <div class="form-group">
                <label>@profile.Text</label>
            </div>
        </div>
    }
</div>

<script>
    function addAdminPermission(userId) {
        $.ajax({
            url: '/Admin/AddAdminPermission?userId=' + userId + '&permissionId=1',
            type: 'POST',
            success: function (result) {
                if (!result) { alert("Error in adding the user permission"); return; }

                var action = document.getElementById("permission_" + userId)
                action.onclick = function () { removeAdminPermission(userId); }
                action.innerHTML = "Remove Admin Permission"
            }
        });
    }

    function removeAdminPermission(userId) {
        $.ajax({
            url: '/Admin/RemoveAdminPermission?userId=' + userId + '&permissionId=1',
            type: 'POST',
            success: function (result) {
                if (!result) { alert("Error in removing the user permission"); return; }

                var action = document.getElementById("permission_" + userId)
                action.onclick = function () { addAdminPermission(userId); }
                action.innerHTML = "Add Admin Permission"
            }
        });
    }
</script>